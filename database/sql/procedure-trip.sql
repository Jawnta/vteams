
-- Get all trips
DROP PROCEDURE IF EXISTS show_trip_all;

DELIMITER ;;
CREATE PROCEDURE show_trip_all()
    READS SQL DATA
BEGIN
    SELECT  id,
            user_id,
            scooter_id,
            distance,
            completed,
            ST_AsGeoJSON(start_position) as start_position,
            ST_AsGeoJSON(stop_position) as stop_position,
            DATE_FORMAT(start_time, '%Y-%m-%d %H:%i:%s') as start_time,
            DATE_FORMAT(stop_time, '%Y-%m-%d %H:%i:%s') as stop_time
    FROM trip;
END
;;

DELIMITER ;
-- Create a new trip

-- Get specific trip
DROP PROCEDURE IF EXISTS show_trip_id;

DELIMITER ;;
CREATE PROCEDURE show_trip_id(
    t_id INT
)
    READS SQL DATA
BEGIN
    SELECT  id,
            user_id,
            scooter_id,
            distance,
            completed,
            ST_AsGeoJSON(start_position) as start_position,
            ST_AsGeoJSON(stop_position) as stop_position,
            DATE_FORMAT(start_time, '%Y-%m-%d %H:%i:%s') as start_time,
            DATE_FORMAT(stop_time, '%Y-%m-%d %H:%i:%s') as stop_time
    FROM trip WHERE id = t_id;
END
;;

DELIMITER ;
-- Update specific trip

-- Delete trip


-- Get trips for user
DROP PROCEDURE IF EXISTS show_trip_user;

DELIMITER ;;
CREATE PROCEDURE show_trip_user(
    u_id INT
)
    READS SQL DATA
BEGIN
    SELECT  id,
            user_id,
            scooter_id,
            distance,
            completed,
            ST_AsGeoJSON(start_position) as start_position,
            ST_AsGeoJSON(stop_position) as stop_position,
            DATE_FORMAT(start_time, '%Y-%m-%d %H:%i:%s') as start_time,
            DATE_FORMAT(stop_time, '%Y-%m-%d %H:%i:%s') as stop_time
    FROM trip WHERE user_id = u_id;
END
;;

DELIMITER ;